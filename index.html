<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ููุตุฉ ุฅุฏุงุฑุฉ ุงูุนููุฏ ุงููุฏุฑุณูุฉ - ูุธุงู ูุชูุงูู ูุฅุฑุณุงู ูุชูููุน ุงูุนููุฏ ุงูุฏุฑุงุณูุฉ">
    <title>ูุฏุงุฑุณ ุฏุงูุฉ ุงูุนููู - ููุตุฉ ุงูุนููุฏ ุงูุฐููุฉ</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Compact Table Styles */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .data-table td {
            white-space: nowrap;
            font-size: 0.85rem !important;
            padding: 0.6rem !important;
            vertical-align: middle;
            min-width: 110px;
        }

        .data-table th {
            white-space: nowrap;
            font-size: 0.85rem;
            padding: 0.6rem !important;
        }

        /* Action Dropdown Components */
        .action-group {
            display: flex;
            align-items: center;
            gap: 2px;
            justify-content: flex-end;
            position: relative;
        }

        .action-btn-main {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid transparent;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn-main.send {
            background: #dcfce7;
            color: #166534;
            border-color: #bbf7d0;
        }

        .action-btn-main.remind {
            background: #fef3c7;
            color: #92400e;
            border-color: #fde68a;
        }

        .action-btn-main.verify {
            background: #e0e7ff;
            color: #3730a3;
            border-color: #c7d2fe;
        }

        .action-btn-main:hover {
            filter: brightness(0.95);
        }

        .action-dropdown-toggle {
            padding: 4px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            color: #64748b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 28px;
            width: 20px;
        }

        .action-dropdown-toggle:hover {
            background: #e2e8f0;
            color: #334155;
        }

        .action-dropdown-menu {
            position: fixed;
            background: white !important;
            border: 1px solid #cbd5e1 !important;
            border-radius: 8px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2);
            width: 210px;
            /* Safer width for long Arabic text */
            z-index: 9999999;
            display: none;
            flex-direction: column;
            padding: 4px;
            text-align: right;
            direction: rtl;
            transform: none !important;
            transition: none !important;
        }

        .action-dropdown-menu.active {
            display: flex;
        }

        .action-dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            font-size: 0.95rem;
            /* Larger font */
            font-weight: 700;
            /* Extra bold */
            color: #1e293b;
            /* Darker color for clarity */
            background: none;
            border: none;
            width: 100%;
            text-align: right;
            border-radius: 4px;
            cursor: pointer;
            transition: none !important;
        }

        .action-dropdown-item:hover {
            background: #f1f5f9;
            color: #0f172a;
        }

        .action-dropdown-item.delete {
            color: #ef4444;
            border-top: 1px solid #f1f5f9;
            margin-top: 5px;
        }

        .action-dropdown-item.delete:hover {
            background: #fee2e2;
            color: #991b1b;
        }
    </style>

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.4.21/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/@pdf-lib/fontkit@1.1.1/dist/fontkit.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/arabic-reshaper@2.1.0/dist/arabic-reshaper.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="firebase-config.js"></script>
</head>

<body class="admin-body">
    <!-- Admin Login Screen -->
    <div id="loginOverlay"
        style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10000; display: flex; align-items: center; justify-content: center;">
        <div class="card" style="width: 400px; padding: 2.5rem; text-align: center;">
            <div class="logo-container" style="margin-bottom: 2rem;">
                <img id="loginLogo" src="assets/logo.png" alt="Logo"
                    style="max-height: 80px; width: auto; max-width: 100%;">
                <h2 style="margin-top: 1rem; color: var(--primary-solid);">ูุธุงู ุงูุนููุฏ ุงููุฏุฑุณูุฉ</h2>
            </div>
            <div class="form-group" style="text-align: right; margin-bottom: 1rem;">
                <label for="adminUserInput">ุงุณู ุงููุณุชุฎุฏู</label>
                <input type="text" id="adminUserInput" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู"
                    style="width: 100%; padding: 0.8rem; border-radius: 8px; border: 1px solid #ddd;">
            </div>
            <div class="form-group" style="text-align: right;">
                <label for="adminPassInput">ูููุฉ ุงููุฑูุฑ</label>
                <input type="password" id="adminPassInput" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ"
                    style="width: 100%; padding: 0.8rem; border-radius: 8px; border: 1px solid #ddd;">
            </div>
            <button class="btn btn-primary" onclick="UI.handleLogin()"
                style="width: 100%; margin-top: 1.5rem;">ุงูุฏุฎูู</button>
            <p id="loginError" style="color: #ef4444; margin-top: 1rem; display: none; font-size: 0.9rem;">ุจูุงูุงุช ุงูุฏุฎูู
                ุบูุฑ ุตุญูุญุฉ</p>
        </div>
    </div>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <img id="navLogo" src="assets/logo.png" alt="ุดุนุงุฑ ูุฏุงุฑุณ ุฏุงูุฉ ุงูุนููู"
                        style="height: 60px; width: auto; max-width: 200px; object-fit: contain;">
                    <h1 style="display: none;">ูุฏุงุฑุณ ุฏุงูุฉ ุงูุนููู</h1>
                </div>
                <div class="nav-links">
                    <a href="#" class="nav-link active" data-page="dashboard">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                        ุงูุฑุฆูุณูุฉ
                    </a>
                    <a href="#" class="nav-link" data-page="students">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        ุงูุทูุงุจ
                    </a>
                    <a href="#" class="nav-link" data-page="contracts">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        ุงูุนููุฏ
                    </a>
                    <a href="#" class="nav-link" data-page="settings">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                        ุงูุฅุนุฏุงุฏุงุช
                    </a>
                    <button id="themeToggle" class="btn-theme" title="ุชุจุฏูู ุงููุถุน ุงููููู">
                        <svg class="sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <svg class="moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" style="display:none;">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    <div id="cloudStatus"
                        style="font-size: 0.75rem; display: flex; align-items: center; gap: 5px; color: #718096;"
                        title="ุญุงูุฉ ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ">
                        <span id="cloudStatusDot"
                            style="width: 8px; height: 8px; background: #cbd5e0; border-radius: 50%;"></span>
                        <span id="cloudStatusText">ุฌุงุฑู ุงูุงุชุตุงู...</span>
                    </div>
                    <a href="#" class="nav-link" onclick="UI.handleLogout()" style="color: #ef4444;">ุฎุฑูุฌ</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Localhost Warning -->
    <div id="localhostWarning" class="localhost-warning" style="display: none;">
        <div class="container">
            <div class="warning-content">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path
                        d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <div>
                    <strong>โ๏ธ ุชุญุฐูุฑ: ุงูุฑูุงุจุท ูู ุชุนูู ุนูู ุงูููุงุชู!</strong>
                    <p>ุดุบูู ููู <code>start-server.bat</code> ูุงุณุชุฎุฏู <strong>http://localhost:8000</strong></p>
                </div>
                <button class="btn btn-secondary btn-small"
                    onclick="document.getElementById('localhostWarning').style.display='none'">ูููุช</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Contracts Management Page -->
            <div id="contracts-page" class="page">
                <!-- Modern Page Header with Gradient -->
                <div class="page-header"
                    style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; border: 1px solid rgba(102, 126, 234, 0.1);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h2
                                style="font-size: 2.2rem; font-weight: 900; background: var(--primary); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">
                                ๐ ุฅุฏุงุฑุฉ ุงูุนููุฏ ุงูุฐููุฉ</h2>
                            <p style="color: var(--text-muted); font-size: 1.05rem;">ูุฑูุฒ ุดุงูู ูุฅุฏุงุฑุฉ ููุงูุจ ุงูุนููุฏ
                                ูุงูุนููุฏ ุงููููุนุฉ</p>
                        </div>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <button class="btn btn-secondary" onclick="ContractUI.downloadSelectedContracts()"
                                style="box-shadow: var(--shadow);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                ุชุญููู ุงููุญุฏุฏ
                            </button>
                            <button class="btn btn-primary" id="newContractBtn"
                                style="box-shadow: var(--shadow-lg); animation: pulse 2s ease-in-out infinite;">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" />
                                </svg>
                                ุฅุถุงูุฉ ูููุฐุฌ ุฌุฏูุฏ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats Cards -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="stat-mini-card" onclick="ContractUI.filterByStatus('all')" style="cursor: pointer;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div
                                style="width: 50px; height: 50px; border-radius: 12px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                </svg>
                            </div>
                            <div>
                                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">ุฌููุน ุงูุนููุฏ</p>
                                <p style="font-size: 1.8rem; font-weight: 800; color: var(--text-dark); margin: 0;"
                                    id="allContractsCount">0</p>
                            </div>
                        </div>
                    </div>

                    <div class="stat-mini-card" onclick="ContractUI.filterByStatus('signed')" style="cursor: pointer;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div
                                style="width: 50px; height: 50px; border-radius: 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
                                    stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </div>
                            <div>
                                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">ุนููุฏ ูููุนุฉ</p>
                                <p style="font-size: 1.8rem; font-weight: 800; color: #10b981; margin: 0;"
                                    id="signedContractsCount">0</p>
                            </div>
                        </div>
                    </div>

                    <div class="stat-mini-card" onclick="ContractUI.filterByStatus('pending')" style="cursor: pointer;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div
                                style="width: 50px; height: 50px; border-radius: 12px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                            </div>
                            <div>
                                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">ููุฏ ุงูุงูุชุธุงุฑ</p>
                                <p style="font-size: 1.8rem; font-weight: 800; color: #f59e0b; margin: 0;"
                                    id="pendingContractsCount">0</p>
                            </div>
                        </div>
                    </div>

                    <div class="stat-mini-card" onclick="ContractUI.showTemplates()" style="cursor: pointer;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div
                                style="width: 50px; height: 50px; border-radius: 12px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white"
                                    stroke-width="2">
                                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                                    <polyline points="13 2 13 9 20 9"></polyline>
                                </svg>
                            </div>
                            <div>
                                <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0;">ููุงูุจ ุงูุนููุฏ</p>
                                <p style="font-size: 1.8rem; font-weight: 800; color: #3b82f6; margin: 0;"
                                    id="templatesCount">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs Navigation -->
                <div class="contracts-tabs"
                    style="display: flex; gap: 1rem; border-bottom: 2px solid var(--border); margin-bottom: 2rem; overflow-x: auto;">
                    <button class="contract-tab active" data-tab="signed" onclick="ContractUI.switchTab('signed')"
                        style="padding: 1rem 1.5rem; background: none; border: none; border-bottom: 3px solid var(--primary-solid); color: var(--primary-solid); font-weight: 700; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2"
                            style="display: inline-block; margin-left: 0.5rem; vertical-align: middle;">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        ุงูุนููุฏ ุงููููุนุฉ
                    </button>
                    <button class="contract-tab" data-tab="templates" onclick="ContractUI.switchTab('templates')"
                        style="padding: 1rem 1.5rem; background: none; border: none; border-bottom: 3px solid transparent; color: var(--text-muted); font-weight: 600; cursor: pointer; transition: all 0.3s; white-space: nowrap;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2"
                            style="display: inline-block; margin-left: 0.5rem; vertical-align: middle;">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        ููุงุฐุฌ ุงูุนููุฏ
                    </button>
                </div>

                <!-- Tab Content: Signed Contracts -->
                <div class="tab-content active" id="signedTab">
                    <div class="card" style="border-radius: 16px; overflow: hidden; box-shadow: var(--shadow-lg);">
                        <div class="card-header"
                            style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); padding: 1.5rem; border-bottom: 2px solid var(--border);">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                                <div>
                                    <h3
                                        style="font-size: 1.4rem; font-weight: 800; color: var(--text-dark); margin: 0;">
                                        ๐ ุณุฌู ุงูุนููุฏ ุงููููุนุฉ</h3>
                                    <p style="font-size: 0.9rem; color: var(--text-muted); margin: 0.3rem 0 0 0;">ุฌููุน
                                        ุงูุนููุฏ ุงูุชู ุชู ุชูููุนูุง ูู ูุจู ุฃูููุงุก ุงูุฃููุฑ</p>
                                </div>
                                <div style="display: flex; gap: 0.8rem; align-items: center; flex-wrap: wrap;">
                                    <div style="position: relative;">
                                        <input type="text" id="signedContractSearch" placeholder="๐ ุจุญุซ ุจุงุณู ุงูุทุงูุจ..."
                                            style="padding: 0.7rem 1rem 0.7rem 2.5rem; border: 2px solid var(--border); border-radius: 10px; width: 280px; font-size: 0.95rem; transition: all 0.3s;"
                                            onfocus="this.style.borderColor='var(--primary-solid)'"
                                            onblur="this.style.borderColor='var(--border)'">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#94a3b8"
                                            stroke-width="2"
                                            style="position: absolute; right: 0.8rem; top: 50%; transform: translateY(-50%);">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <path d="M21 21l-4.35-4.35"></path>
                                        </svg>
                                    </div>
                                    <select id="filterSignedStatus"
                                        style="padding: 0.7rem 1rem; border: 2px solid var(--border); border-radius: 10px; font-size: 0.95rem; cursor: pointer;"
                                        onchange="ContractUI.applyFilter(this.value)">
                                        <option value="all">ุฌููุน ุงูุญุงูุงุช</option>
                                        <option value="signed">ูููุนุฉ ููุท</option>
                                        <option value="verified">ููุซูุฉ ููุท</option>
                                    </select>
                                    <button id="downloadSelectedBtn" onclick="ContractUI.downloadSelectedContracts()"
                                        style="padding: 0.7rem 1.5rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 0.5rem;">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        ุชุญููู ุงููุญุฏุฏ
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="data-table" id="signedContractsTable" style="font-size: 0.95rem;">
                                <thead>
                                    <tr style="background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);">
                                        <th style="width: 50px; text-align: center;"><input type="checkbox"
                                                id="selectAllContracts"
                                                style="cursor: pointer; width: 18px; height: 18px;"></th>
                                        <th style="font-weight: 800; color: var(--text-dark);">ุงุณู ุงูุทุงูุจ</th>
                                        <th style="font-weight: 800; color: var(--text-dark);">ููู ุงูุฃูุฑ</th>
                                        <th style="font-weight: 800; color: var(--text-dark);">ุชุงุฑูุฎ ุงูุชูููุน</th>
                                        <th style="font-weight: 800; color: var(--text-dark);">ุญุงูุฉ ุงูุนูุฏ</th>
                                        <th style="font-weight: 800; color: var(--text-dark); text-align: center;">
                                            ุงูุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="signedContractsTableBody">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Contract Templates -->
                <div class="tab-content" id="templatesTab" style="display: none;">
                    <div style="margin-bottom: 2rem;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <div>
                                <h3
                                    style="font-size: 1.5rem; font-weight: 800; color: var(--text-dark); margin-bottom: 0.3rem;">
                                    ๐ ููุงุฐุฌ ุงูุนููุฏ ุงููุญููุธุฉ</h3>
                                <p style="color: var(--text-muted); font-size: 0.95rem;">ููุงูุจ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูุน
                                    ุฅููุงููุฉ ุงูุชุฎุตูุต</p>
                            </div>
                            <button class="btn btn-primary" onclick="ContractUI.openModal()"
                                style="box-shadow: var(--shadow-md);">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 4V16M4 10H16" stroke="currentColor" stroke-width="2"
                                        stroke-linecap="round" />
                                </svg>
                                ุฅุถุงูุฉ ูููุฐุฌ ุฌุฏูุฏ
                            </button>
                        </div>
                    </div>
                    <div class="contracts-grid" id="contractsGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem;">
                        <!-- Templates populated here by JS -->
                    </div>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="page-header"
                    style="background: var(--primary-gradient); padding: 3rem; border-radius: var(--radius-lg); color: white; margin-bottom: 2.5rem; position: relative; overflow: hidden; box-shadow: var(--shadow-premium);">
                    <div
                        style="position: absolute; top: -50px; left: -50px; width: 200px; height: 200px; background: rgba(255,255,255,0.1); border-radius: 50%;">
                    </div>
                    <div
                        style="position: absolute; bottom: -30px; right: 10%; width: 150px; height: 150px; background: rgba(255,255,255,0.05); border-radius: 50%;">
                    </div>
                    <div style="position: relative; z-index: 1;">
                        <h2 style="font-size: 2.5rem; margin-bottom: 0.5rem; font-weight: 900; letter-spacing: -1px;">
                            ูุฑุญุจุงู ุจู ูู ููุญุฉ ุงูุชุญูู ๐</h2>
                        <p style="font-size: 1.1rem; opacity: 0.9; max-width: 600px;">ูุธุงู ูุฏุงุฑุณ ุฏุงูุฉ ุงูุนููู ุงููุชุทูุฑ
                            ูุฅุฏุงุฑุฉ ุงูุนููุฏ ุงููุฏุฑุณูุฉ ุจุทุฑููุฉ ุฐููุฉ ูุณุฑูุนุฉ.</p>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(99, 102, 241, 0.1); color: #6366f1;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21M23 21V19C23 17.9391 22.5786 16.9217 21.8284 16.1716C21.0783 15.4214 20.0609 15 19 15H18M13 7C13 9.20914 11.2091 11 9 11C6.79086 11 5 9.20914 5 7C5 4.79086 6.79086 3 9 3C11.2091 3 13 4.79086 13 7Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>ุฅุฌูุงูู ุงูุทูุงุจ</h3>
                            <p class="stat-number" id="totalStudents">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>ุงูุนููุฏ ุงููููุนุฉ</h3>
                            <p class="stat-number" id="signedContracts">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>ููุฏ ุงูุงูุชุธุงุฑ</h3>
                            <p class="stat-number" id="pendingContracts">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M3 8L10.89 13.26C11.2187 13.4793 11.6049 13.5963 12 13.5963C12.3951 13.5963 12.7813 13.4793 13.11 13.26L21 8M5 19H19C19.5304 19 20.0391 18.7893 20.4142 18.4142C20.7893 18.0391 21 17.5304 21 17V7C21 6.46957 20.7893 5.96086 20.4142 5.58579C20.0391 5.21071 19.5304 5 19 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <h3>ุงูุนููุฏ ุงููุฑุณูุฉ</h3>
                            <p class="stat-number" id="sentContracts">0</p>
                        </div>
                    </div>
                </div>



                <!-- Analysis Charts -->
                <div class="grid-2-1"
                    style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="card p-4">
                        <div class="card-header" style="border:none; padding-bottom: 0;">
                            <h3>ูุคุดุฑุงุช ุงูุฅูุฌุงุฒ</h3>
                        </div>
                        <div style="height: 300px; padding: 1rem;">
                            <canvas id="statsChart"></canvas>
                        </div>
                    </div>
                    <div class="card p-4">
                        <div class="card-header" style="border:none; padding-bottom: 0;">
                            <h3>ุญุงูุงุช ุงูุนููุฏ</h3>
                        </div>
                        <div style="height: 300px; padding: 1rem;">
                            <canvas id="distributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Students Table -->
                <div class="card" style="box-shadow: var(--shadow-premium);">
                    <div class="card-header"
                        style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--border-color); padding: 2rem;">
                        <div>
                            <h3 style="font-size: 1.5rem; font-weight: 800; color: #f59e0b; margin-bottom: 0.25rem;">
                                ุฅุฌุฑุงุกุงุช ูุทููุจุฉ: ุนููุฏ ุจุงูุชุธุงุฑ ุงูุชูููุน</h3>
                            <p style="font-size: 0.9rem; color: var(--text-muted);">ูุงุฆูุฉ ุงูุทูุงุจ ุงูุฐูู ูู ูููุนูุง ุงูุนูุฏ
                                ุจุนุฏ (ุงูุฃููููุฉ)</p>
                        </div>
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <div style="position: relative;">
                                <input type="text" id="studentSearch" placeholder="ุจุญุซ ุจุงูุงุณู..."
                                    style="padding: 0.75rem 1rem 0.75rem 2.5rem; border: 2px solid var(--border-color); border-radius: var(--radius-md); width: 300px; font-size: 0.95rem; background: var(--bg-soft); transition: var(--transition-base);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)"
                                    stroke-width="2"
                                    style="position: absolute; right: 0.8rem; top: 50%; transform: translateY(-50%);">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="M21 21l-4.35-4.35"></path>
                                </svg>
                            </div>
                            <button id="deleteSelectedBtn" class="btn btn-danger" style="display: none;"
                                onclick="UI.deleteSelectedStudents()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path
                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                    </path>
                                </svg>
                                ุญุฐู (<span id="selectedCount">0</span>)
                            </button>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="studentsTable">
                            <thead>
                                <tr>
                                    <th style="width: 40px;"><input type="checkbox" id="selectAllDashboard"></th>
                                    <th onclick="UI.sortStudents('studentName')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงุณู ุงูุทุงูุจ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงููุณุงุฑ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th onclick="UI.sortStudents('studentLevel')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงููุฑุญูุฉ ุงูุฏุฑุงุณูุฉ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th onclick="UI.sortStudents('studentGrade')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงูุตู
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ูููุฉ ุงูุทุงูุจ</th>
                                    <th onclick="UI.sortStudents('parentName')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงุณู ููู ุงูุฃูุฑ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                                    <th>ูููุฉ ููู ุงูุฃูุฑ</th>
                                    <th>ุฑูู ุงููุงุชุณุงุจ</th>
                                    <th onclick="UI.sortStudents('contractStatus')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุญุงูุฉ ุงูุนูุฏ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="studentsTableBody">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- Students Page -->
            <div id="students-page" class="page">
                <div class="page-header"
                    style="background: var(--bg-card); padding: 2.5rem; border-radius: var(--radius-lg); margin-bottom: 2.5rem; border: 1px solid var(--border-color); box-shadow: var(--shadow-md); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1.5rem;">
                    <div>
                        <h2
                            style="font-size: 2rem; font-weight: 800; color: var(--text-primary); margin-bottom: 0.25rem;">
                            ุฅุฏุงุฑุฉ ุงูุทูุงุจ ุงููููุฉ</h2>
                        <p style="color: var(--text-muted); font-size: 1rem;">ูุงุนุฏุฉ ุจูุงูุงุช ุดุงููุฉ ูุฌููุน ุงูุทูุงุจ ุงููุณุฌููู
                            ูุนููุฏูู.</p>
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="UI.openImportModal()" style="height: 48px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            ุงุณุชูุฑุงุฏ (Excel)
                        </button>
                        <button class="btn btn-primary" onclick="UI.openModal()" style="height: 48px;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 5v14M5 12h14"></path>
                            </svg>
                            ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ
                        </button>
                    </div>
                </div>

                <div class="card" style="box-shadow: var(--shadow-premium);">
                    <div class="card-header" style="padding: 2rem; border-bottom: 2px solid var(--border-color);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1.5rem;">
                            <div style="display: flex; gap: 12px; align-items: center; flex-wrap: wrap; flex: 1;">
                                <div style="position: relative; flex: 1; min-width: 250px;">
                                    <input type="text" id="studentSearchAll"
                                        placeholder="ุจุญุซ ุจุงูุงุณูุ ุงูุจุฑูุฏุ ุฃู ุงููุงุชู..."
                                        style="width: 100%; padding: 0.75rem 1rem 0.75rem 2.5rem; border: 2px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.95rem; background: var(--bg-soft);"
                                        oninput="UI.applyFilters()">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                        stroke="var(--text-muted)" stroke-width="2"
                                        style="position: absolute; right: 0.85rem; top: 50%; transform: translateY(-50%);">
                                        <circle cx="11" cy="11" r="8"></circle>
                                        <path d="M21 21l-4.35-4.35"></path>
                                    </svg>
                                </div>
                                <select id="filterLevel"
                                    style="padding: 0.75rem 1rem; border: 2px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-soft); cursor: pointer;"
                                    onchange="UI.applyFilters()">
                                    <option value="">ุฌููุน ุงููุฑุงุญู</option>
                                </select>
                                <select id="filterGrade"
                                    style="padding: 0.75rem 1rem; border: 2px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-soft); cursor: pointer;"
                                    onchange="UI.applyFilters()">
                                    <option value="">ุฌููุน ุงูุตููู</option>
                                </select>
                            </div>

                            <div style="display: flex; gap: 10px; align-items: center;">
                                <div id="filteredCountInfo"
                                    style="font-size: 0.95rem; font-weight: 700; color: var(--text-secondary); background: var(--bg-soft); padding: 0.5rem 1rem; border-radius: var(--radius-full);">
                                    <span id="filteredCount">0</span> ุทูุงุจ
                                </div>
                                <button class="btn btn-secondary" onclick="UI.exportToExcel()"
                                    style="padding: 0.6rem 1rem;">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                    ุชุตุฏูุฑ
                                </button>
                            </div>
                        </div>

                        <!-- Bulk Actions Bar -->
                        <div id="bulkActions"
                            style="display: none; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px dashed var(--border-color); align-items: center; gap: 12px; animation: fadeInUp 0.3s ease;">
                            <span
                                style="font-size: 0.9rem; font-weight: 700; color: var(--primary-main); margin-left: 10px;">ุงูุฅุฌุฑุงุกุงุช
                                ุงููุฌูุนุฉ:</span>
                            <button class="btn btn-secondary" onclick="UI.startBulkAction('send')"
                                style="font-size: 0.85rem; padding: 0.5rem 1rem; color: #10b981; border-color: #10b981;">
                                ๐ข ุฅุฑุณุงู ุนููุฏ
                            </button>
                            <button class="btn btn-secondary" onclick="UI.startBulkAction('remind')"
                                style="font-size: 0.85rem; padding: 0.5rem 1rem; color: #f59e0b; border-color: #f59e0b;">
                                ๐ ุชุฐููุฑ ุงููุญุฏุฏ
                            </button>
                            <!-- Hidden util buttons -->
                            <button class="btn btn-secondary" onclick="UI.bulkUpdateStatus('sent')"
                                style="display:none;">DEBUG_SENT</button>

                            <button class="btn btn-secondary" onclick="UI.bulkUpdateStatus('verified')"
                                style="font-size: 0.85rem; padding: 0.5rem 1rem;">ุชูุซูู ุงููุญุฏุฏ</button>
                            <button id="deleteSelectedBtnMain" class="btn btn-danger"
                                style="font-size: 0.85rem; padding: 0.5rem 1rem;" onclick="UI.deleteSelectedStudents()">
                                ุญุฐู ุงููุญุฏุฏ (<span id="selectedCountMain">0</span>)
                            </button>
                        </div>
                    </div>

                    <!-- Bulk Action Queue Modal -->
                    <div id="bulkQueueModal" class="modal" style="z-index: 10000;">
                        <div class="modal-content" style="max-width: 500px; text-align: center;">
                            <div class="modal-header">
                                <h3 id="bulkQueueTitle">ุฌุงุฑู ุงูุฅุฑุณุงู ุงูุฌูุงุนู...</h3>
                                <button class="close-btn" onclick="UI.closeBulkModal()">&times;</button>
                            </div>
                            <div style="padding: 2rem;">
                                <div style="margin-bottom: 1.5rem;">
                                    <span id="bulkQueueProgress"
                                        style="font-size: 3rem; font-weight: 800; color: var(--primary-main);">1/5</span>
                                    <p style="color: var(--text-muted); margin-top: 0.5rem;">ูุฑุฌู ุนุฏู ุฅุบูุงู ูุฐู ุงููุงูุฐุฉ
                                        ุญุชู ุงูุงูุชูุงุก</p>
                                </div>

                                <div id="bulkQueueCurrentStudent"
                                    style="background: var(--bg-soft); padding: 1rem; border-radius: 8px; margin-bottom: 2rem;">
                                    <p>ุฌุงุฑู ุงูุชุญุถูุฑ ูู: <strong id="bulkStudentName">-</strong></p>
                                </div>

                                <div id="bulkQueueActions">
                                    <button id="bulkNextBtn" class="btn btn-primary" onclick="UI.processNextInQueue()"
                                        style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                                        ๐ ูุชุญ ูุงุชุณุงุจ ูุฅุฑุณุงู
                                    </button>
                                    <p style="font-size: 0.85rem; color: #f59e0b; margin-top: 10px;">
                                        โ๏ธ ุณููุชุญ ูุงุชุณุงุจ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ. ุจุนุฏ ุงูุฅุฑุณุงูุ ุนุฏ ููุฐู ุงูุตูุญุฉ ููุงุณุชูุฑุงุฑ.
                                    </p>
                                </div>

                                <div id="bulkQueueComplete" style="display: none;">
                                    <div style="color: #10b981; font-size: 4rem; margin-bottom: 1rem;">โ</div>
                                    <h3>ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ!</h3>
                                    <button class="btn btn-secondary" onclick="UI.closeBulkModal()"
                                        style="margin-top: 1rem;">ุฅุบูุงู</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="allStudentsTable">
                            <thead>
                                <tr>
                                    <th style="width: 40px;"><input type="checkbox" id="selectAllAllStudents"></th>
                                    <th onclick="UI.sortStudents('studentName')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงุณู ุงูุทุงูุจ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงููุณุงุฑ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th onclick="UI.sortStudents('studentLevel')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงููุฑุญูุฉ ุงูุฏุฑุงุณูุฉ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th onclick="UI.sortStudents('studentGrade')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงูุตู
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ูููุฉ ุงูุทุงูุจ</th>
                                    <th onclick="UI.sortStudents('parentName')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุงุณู ููู ุงูุฃูุฑ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</th>
                                    <th>ูููุฉ ููู ุงูุฃูุฑ</th>
                                    <th>ุฑูู ุงููุงุชุณุงุจ</th>
                                    <th onclick="UI.sortStudents('contractStatus')" style="cursor: pointer;">
                                        <div style="display:flex; align-items:center; gap:5px;">
                                            ุญุงูุฉ ุงูุนูุฏ
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="#3b82f6"
                                                stroke="#3b82f6" stroke-width="2">
                                                <path d="M7 15l5 5 5-5" />
                                                <path d="M7 9l5-5 5 5" />
                                            </svg>
                                        </div>
                                    </th>
                                    <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                </tr>
                            </thead>
                            <tbody id="allStudentsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>



            <!-- Settings Page -->
            <div id="settings-page" class="page">
                <div class="page-header"
                    style="background: var(--bg-card); padding: 2rem; border-radius: var(--radius-lg); margin-bottom: 2rem; border: 1px solid var(--border-color); box-shadow: var(--shadow-md);">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <div>
                            <h2
                                style="font-size: 2rem; font-weight: 800; color: var(--text-primary); margin-bottom: 0.5rem;">
                                ููุญุฉ ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช</h2>
                            <p style="color: var(--text-muted); font-size: 1rem;">ุงูุชุญูู ุงููุงูู ูู ูููุฉ ุงููุฏุฑุณุฉุ ุงูููููุฉ
                                ุงูุฃูุงุฏูููุฉุ ูุงูุฃูุงู.</p>
                        </div>
                        <button class="btn btn-primary" onclick="UI.saveSettings()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                <polyline points="7 3 7 8 15 8"></polyline>
                            </svg>
                            ุญูุธ ูุงูุฉ ุงูุชุบููุฑุงุช
                        </button>
                    </div>
                </div>

                <!-- Settings Tabs -->
                <div class="settings-tabs">
                    <button class="tab-btn active" onclick="UI.switchSettingsTab('general')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                        </svg>
                        ุงููููุฉ ุงูุนุงูุฉ
                    </button>
                    <button class="tab-btn" onclick="UI.switchSettingsTab('academic')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                        ุงูููููุฉ ุงูุฃูุงุฏูููุฉ
                    </button>
                    <button class="tab-btn" onclick="UI.switchSettingsTab('security')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                        ุงูุฃูุงู ูุงูุญุณุงุจ
                    </button>
                    <button class="tab-btn" onclick="UI.switchSettingsTab('system')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg>
                        ุงููุธุงู ูุงููุณุฎ ุงูุงุญุชูุงุทู
                    </button>
                </div>

                <!-- Tab 1: General Settings -->
                <div id="tab-general" class="tab-content active">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
                        <div class="card">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุจูุงูุงุช ุงููุฏุฑุณุฉ ุงูุฃุณุงุณูุฉ</h3>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="form-group">
                                    <label>ุงุณู ุงููุฏุฑุณุฉ</label>
                                    <input type="text" id="schoolName" placeholder="ุฃุฏุฎู ุงุณู ุงููุฏุฑุณุฉ ุงูุฑุณูู">
                                </div>
                                <div class="form-group">
                                    <label>ุฑูู ุงููุงุชุณุงุจ ุงูุฑุณูู</label>
                                    <input type="text" id="schoolPhone" placeholder="9665xxxxxxxx">
                                    <small style="color:var(--text-muted)">ูุณุชุฎุฏู ูุฅุฑุณุงู ุฑูุงุจุท ุงูุนููุฏ ูุฃูููุงุก
                                        ุงูุฃููุฑ</small>
                                </div>
                                <div class="form-group">
                                    <label>ุฑุงุจุท ุงูุณูุฑูุฑ (Server Link)</label>
                                    <input type="text" id="serverAddress" placeholder="http://YOUR-IP:PORT">
                                    <small style="color:var(--text-muted)">ุงูุฑุงุจุท ุงูุฐู ุณูุชู ูุชุญู ุนูุฏ ุถุบุท ููู ุงูุฃูุฑ ุนูู
                                        ุงูุนูุฏ</small>
                                </div>
                            </div>
                        </div>

                        <!-- Login Settings Card (Moved for visibility) -->
                        <div class="card" style="border-right: 4px solid var(--primary-main);">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุจูุงูุงุช ุฏุฎูู ุงููุฏูุฑ</h3>
                                <p style="font-size:0.85rem; color:var(--text-muted)">ุงููุนูููุงุช ุงููุณุชุฎุฏูุฉ ููุฏุฎูู ูููุญุฉ
                                    ุงูุชุญูู</p>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="form-group">
                                    <label>ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ</label>
                                    <input type="text" id="adminUsernameSetting" placeholder="admin">
                                </div>
                                <div class="form-group">
                                    <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                    <input type="password" id="adminPassSetting" placeholder="********">
                                    <small style="display:block; margin-top:5px; color:var(--text-muted)">ุงุชุฑููุง ูุงุฑุบุฉ
                                        ุฅุฐุง ูุง ุชุฑูุฏ ุชุบููุฑูุง</small>
                                </div>
                                <button class="btn btn-primary" onclick="UI.saveSettings()" style="width:100%">ุชุญุฏูุซ
                                    ุจูุงูุงุช ุงูุฏุฎูู</button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุงูุฎุชู ูุงูุดุนุงุฑ</h3>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="form-group">
                                    <label>ูุต ุงูุฎุชู ุงูุฏุงุฆุฑู</label>
                                    <input type="text" id="schoolStampInput" oninput="UI.updateStampPreview()"
                                        placeholder="ูุซุงู: ุฅุฏุงุฑุฉ ุงููุจูู ูุงูุชุณุฌูู">
                                </div>
                                <!-- Stamp Preview -->
                                <div style="display: flex; justify-content: center; margin: 2rem 0;">
                                    <div class="school-stamp"
                                        style="width: 120px; height: 120px; border: 4px double var(--primary-main); border-radius: 50%; display: flex; align-items: center; justify-content: center; position: relative; color: var(--primary-main); font-weight: 900; transform: rotate(-15deg); background: rgba(99, 102, 241, 0.05);">
                                        <div
                                            style="position: absolute; width: 90%; height: 90%; border: 1px solid var(--primary-main); border-radius: 50%;">
                                        </div>
                                        <div id="stampPreviewText"
                                            style="font-size: 1rem; text-align: center; max-width: 80%; line-height: 1.2;">
                                            ุงูุฅุฏุงุฑุฉ</div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>ุดุนุงุฑ ุงููุฏุฑุณุฉ (ุฑุงุจุท ุฃู ููู)</label>
                                    <input type="file" onchange="UI.handleLogoUpload(this)" accept="image/*">
                                    <img id="settingsLogoPreview" src=""
                                        style="max-height: 60px; margin-top: 10px; display: block;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Academic Structure -->
                <div id="tab-academic" class="tab-content">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
                        <!-- Levels Manager -->
                        <div class="card">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุงููุฑุงุญู ุงูุฏุฑุงุณูุฉ</h3>
                                <p style="font-size:0.9rem; color:var(--text-muted)">ุฃุถู ุงููุฑุงุญู ุงููุชุงุญุฉ ูู ูุฏุฑุณุชู
                                    (ุงุจุชุฏุงุฆูุ ูุชูุณุท...)</p>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="input-with-btn">
                                    <input type="text" id="newLevelInput"
                                        placeholder="ุฃุฏุฎู ุงุณู ุงููุฑุญูุฉ (ูุซุงู: ุฑูุงุถ ุฃุทูุงู)">
                                    <button class="btn btn-secondary"
                                        onclick="UI.addChip('schoolLevelsInput', 'newLevelInput')">ุฅุถุงูุฉ</button>
                                </div>
                                <div id="levelsChips" class="chips-container"></div>
                                <textarea id="schoolLevelsInput" style="display:none"></textarea>
                                <!-- Hidden syncing field -->
                            </div>
                        </div>

                        <!-- Grades Manager -->
                        <div class="card">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุงูุตููู ุงูุฏุฑุงุณูุฉ</h3>
                                <p style="font-size:0.9rem; color:var(--text-muted)">ุฃุถู ุงููุตูู ุงููุชุงุญุฉ (ุงูุตู ุงูุฃููุ
                                    ุงูุซุงูู...)</p>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="input-with-btn">
                                    <input type="text" id="newGradeInput" placeholder="ุฃุฏุฎู ุงุณู ุงูุตู">
                                    <button class="btn btn-secondary"
                                        onclick="UI.addChip('schoolGradesInput', 'newGradeInput')">ุฅุถุงูุฉ</button>
                                </div>
                                <div id="gradesChips" class="chips-container"></div>
                                <textarea id="schoolGradesInput" style="display:none"></textarea>
                                <!-- Hidden syncing field -->
                            </div>
                        </div>

                        <!-- Custom Fields Manager -->
                        <div class="card" style="grid-column: 1 / -1;">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุจูุงูุงุช ุฅุถุงููุฉ ููุทุงูุจ (Custom Fields)</h3>
                                <p style="font-size:0.9rem; color:var(--text-muted)">ุฃุถู ุญูููุงู ูุฎุตุตุฉ ุชุธูุฑ ูู ูููุฐุฌ
                                    ุชุณุฌูู ุงูุทุงูุจ (ูุซู: ุฑูู ุงููููุฉุ ุชุงุฑูุฎ ุงููููุงุฏ)</p>
                            </div>
                            <div class="card-body" style="padding: 2rem;">
                                <div class="input-with-btn">
                                    <input type="text" id="newFieldLabel"
                                        placeholder="ุงุณู ุงูุญูู (ูุซุงู: ุฑูู ุงูุณุฌู ุงููุฏูู)">
                                    <select id="newFieldType" style="max-width: 150px;">
                                        <option value="text">ูุต</option>
                                        <option value="number">ุฑูู</option>
                                        <option value="date">ุชุงุฑูุฎ</option>
                                    </select>
                                    <button class="btn btn-secondary" onclick="UI.addCustomField()">ุฅุถุงูุฉ ุญูู</button>
                                </div>
                                <div id="customFieldsList"></div>
                                <textarea id="customFieldsSetting" style="display:none"></textarea>
                                <!-- Hidden syncing field -->
                            </div>
                        </div>

                        <!-- Auto-Assign Contracts Card -->
                        <div class="card" style="grid-column: 1 / -1;">
                            <div class="card-header">
                                <h3 style="font-weight:700;">ุฑุจุท ุงูุนููุฏ ุงูุชููุงุฆู ุจุงููุณุงุฑุงุช</h3>
                                <p style="font-size:0.9rem; color:var(--text-muted)">ุงุฎุชุฑ ุงูุนููุฏ ุงูุงูุชุฑุงุถูุฉ ููู ูุณุงุฑ
                                    ููุชู ุฅุณูุงุฏูุง ุชููุงุฆูุงู ุนูุฏ ุงุณุชูุฑุงุฏ ุงูุทูุงุจ.</p>
                            </div>
                            <div class="card-body"
                                style="padding: 2rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div class="form-group">
                                    <label for="nationalContractSetting">ุงูุนูุฏ ุงูุงูุชุฑุงุถู ูููุณุงุฑ (ุงูุฃููู/ุซูุงุฆู
                                        ุงููุบุฉ)</label>
                                    <select id="nationalContractSetting">
                                        <option value="">-- ุงุฎุชุฑ ุงูุนูุฏ --</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="diplomaContractSetting">ุงูุนูุฏ ุงูุงูุชุฑุงุถู ููุณุงุฑ (ุงูุฏุจูููุฉ)</label>
                                    <select id="diplomaContractSetting">
                                        <option value="">-- ุงุฎุชุฑ ุงูุนูุฏ --</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Security -->
                <!-- Security Tab removed (content moved to General for accessibility) -->
                <div id="tab-security" class="tab-content">
                    <div style="padding: 3rem; text-align: center; color: var(--text-muted);">
                        <p>ุชู ููู ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ุฅูู ุชุจููุจ "ุงููููุฉ ุงูุนุงูุฉ" ูุชุณููู ุงููุตูู ุฅูููุง.</p>
                        <button class="btn btn-secondary" onclick="UI.switchSettingsTab('general')"
                            style="margin-top: 1rem;">ุงูุฐูุงุจ ููุงู</button>
                    </div>
                </div>

                <!-- Tab 4: System (Keep existing) -->
                <div id="tab-system" class="tab-content">
                    <!-- Cloud Settings (Existing) -->
                    <div class="card" style="box-shadow: var(--shadow-md);">
                        <div class="card-header"
                            style="padding: 1.5rem; border-bottom: 1px solid var(--border-color); background: rgba(16, 185, 129, 0.03);">
                            <h3 style="display: flex; align-items: center; gap: 10px;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success-main)"
                                    stroke-width="2">
                                    <path
                                        d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z">
                                    </path>
                                </svg>
                                ุงููุฒุงููุฉ ุงูุณุญุงุจูุฉ (Firebase)
                            </h3>
                        </div>
                        <div class="card-body" style="padding: 2rem;">
                            <div id="cloudStatus" class="status-badge status-pending" style="margin-bottom: 1.5rem;">
                                ุฌุงุฑู ุงูุชุญูู...</div>
                            <div style="display: grid; gap: 1rem; grid-template-columns: 1fr 1fr;">
                                <button class="btn btn-primary" onclick="CloudDB.syncAllLocalToCloud()">ุฑูุน ุงูุจูุงูุงุช
                                    ููุณุญุงุจุฉ</button>
                                <button class="btn btn-secondary" onclick="CloudDB.syncCloudToLocal()">ุชุญููู ูู
                                    ุงูุณุญุงุจุฉ</button>
                            </div>
                        </div>
                    </div>

                    <!-- Data Backup & Restore -->
                    <div class="card" style="margin-top: 2rem; box-shadow: var(--shadow-md);">
                        <div class="card-header" style="padding: 1.5rem; border-bottom: 1px solid var(--border-color);">
                            <h3
                                style="display: flex; align-items: center; gap: 10px; font-weight: 700; color: var(--text-primary);">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุนุงุฏุฉ
                            </h3>
                            <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 5px;">
                                ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงููุธุงู ูุญูุงูุชูุง ูู ุงูุถูุงุน.
                            </p>
                        </div>
                        <div class="card-body" style="padding: 2rem;">

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; flex-wrap: wrap;">
                                <!-- Excel Export -->
                                <div
                                    style="border: 1px solid var(--border-color); padding: 1.5rem; border-radius: 8px;">
                                    <h4 style="margin-top:0; color: #10b981;">๐ ุชูุงุฑูุฑ ุฅูุณู (Excel)</h4>
                                    <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1rem;">
                                        ูุฃุบุฑุงุถ ุงูุทุจุงุนุฉ ูุงููุฑุงุฌุนุฉ ููุท. ูุฏ ูุง ุชุญุชูู ุนูู ุงูุชูุงููุน.
                                    </p>
                                    <button class="btn btn-secondary" onclick="UI.backupAllData()"
                                        style="width: 100%; justify-content: center;">
                                        ุชุญููู ููู ุฅูุณู
                                    </button>
                                </div>

                                <!-- System Snapshot -->
                                <div
                                    style="border: 1px solid var(--primary-main); background: rgba(99, 102, 241, 0.02); padding: 1.5rem; border-radius: 8px;">
                                    <h4 style="margin-top:0; color: var(--primary-main);">๐พ ููุทุฉ ูุงููุฉ ูููุธุงู (JSON)
                                    </h4>
                                    <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 1rem;">
                                        ูููุณุฎ ุงูุงุญุชูุงุทู ุงูุญูููู. ูุญูุธ ุงูุชูุงููุนุ ุงูุตูุฑุ ููู ุดูุก ุจุฏูุฉ 100%.
                                    </p>
                                    <div style="display: flex; gap: 10px;">
                                        <button class="btn btn-primary" onclick="UI.exportSystemJSON()"
                                            style="flex: 1; justify-content: center;">
                                            ุญูุธ ูุณุฎุฉ ูุงููุฉ
                                        </button>
                                        <button class="btn btn-warning"
                                            onclick="document.getElementById('jsonrestoreInput').click()"
                                            style="flex: 1; justify-content: center; background: #f59e0b; border-color: #f59e0b; color: white;">
                                            ุงุณุชุนุงุฏุฉ
                                        </button>
                                    </div>
                                    <input type="file" id="jsonrestoreInput" accept=".json" hidden
                                        onchange="UI.importSystemJSON(this)">
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Danger Zone (Existing) -->
                    <div class="card"
                        style="margin-top: 2rem; border: 2px solid var(--danger-main); background: rgba(239, 68, 68, 0.02);">
                        <div class="card-header" style="background: rgba(239, 68, 68, 0.05); padding: 1.5rem;">
                            <h3 style="color: var(--danger-main);">ููุทูุฉ ุงูุฎุทุฑ</h3>
                        </div>
                        <div class="card-body"
                            style="padding: 2rem; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <p style="font-weight: 700;">ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุญููุฉ</p>
                                <p style="font-size: 0.9rem; color: var(--text-muted);">ุณูุชู ูุณุญ ูุงูุฉ ุงูุจูุงูุงุช ูู ูุฐุง
                                    ุงูุฌูุงุฒ ููุท.</p>
                            </div>
                            <button class="btn btn-danger" onclick="DB.clearAllData()">ูุณุญ ูุงูุฉ ุงูุจูุงูุงุช</button>
                        </div>
                    </div>
                </div>
            </div>
    </main>

    <!-- New Student Modal -->
    <div class="modal" id="newStudentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">ุชุณุฌูู ุทุงูุจ ุฌุฏูุฏ</h3>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            <form id="studentForm" class="form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="studentName">ุงุณู ุงูุทุงูุจ</label>
                        <input type="text" id="studentName" required placeholder="ุฃุฏุฎู ุงุณู ุงูุทุงูุจ ุงููุงูู">
                    </div>
                    <div class="form-group">
                        <label for="studentTrack">ุงููุณุงุฑ ุงูุชุนูููู</label>
                        <select id="studentTrack">
                            <option value="">ุงุฎุชุฑ ุงููุณุงุฑ</option>
                            <option value="ูุณุงุฑ ุซูุงุฆู ุงููุบุฉ">ูุณุงุฑ ุซูุงุฆู ุงููุบุฉ</option>
                            <option value="ูุณุงุฑ ุฏุจูููุง ุฃูุฑูููุฉ">ูุณุงุฑ ุฏุจูููุง ุฃูุฑูููุฉ</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="studentLevel">ุงููุฑุญูุฉ ุงูุฏุฑุงุณูุฉ</label>
                        <select id="studentLevel" required>
                            <option value="">ุงุฎุชุฑ ุงููุฑุญูุฉ</option>
                            <!-- Populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="studentGrade">ุงูุตู ุงูุฏุฑุงุณู</label>
                        <select id="studentGrade" required>
                            <option value="">ุงุฎุชุฑ ุงูุตู</option>
                            <!-- Populated dynamically -->
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="explicitNationalId">ูููุฉ ุงูุทุงูุจ</label>
                        <input type="number" id="explicitNationalId" placeholder="ุฃุฏุฎู ุฑูู ุงููููุฉ/ุงูุฅูุงูุฉ">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="parentName">ุงุณู ููู ุงูุฃูุฑ</label>
                        <input type="text" id="parentName" required placeholder="ุฃุฏุฎู ุงุณู ููู ุงูุฃูุฑ">
                    </div>
                    <div class="form-group">
                        <label for="parentNationalId">ูููุฉ ููู ุงูุฃูุฑ</label>
                        <input type="number" id="parentNationalId" placeholder="ุฃุฏุฎู ุฑูู ุงููููุฉ">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="parentEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="parentEmail" required placeholder="example@email.com">
                    </div>
                    <div class="form-group">
                        <label for="parentWhatsapp">ุฑูู ุงููุงุชุณุงุจ</label>
                        <input type="tel" id="parentWhatsapp" required placeholder="+966xxxxxxxxx">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="sendMethod">ุทุฑููุฉ ุงูุฅุฑุณุงู</label>
                        <select id="sendMethod" required>
                            <option value="">ุงุฎุชุฑ ุทุฑููุฉ ุงูุฅุฑุณุงู</option>
                            <option value="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</option>
                            <option value="whatsapp">ุงููุงุชุณุงุจ</option>
                            <option value="both">ููุงููุง</option>
                        </select>
                    </div>
                </div>

                <div id="dynamicCustomFieldsContainer" class="form-row" style="flex-wrap: wrap; gap: 1rem;">
                    <!-- Dynamic fields will be inserted here -->
                </div>

                <div class="form-group">
                    <label for="contractYear">ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ</label>
                    <input type="text" id="contractYear" required placeholder="2024-2025">
                </div>

                <div class="form-group">
                    <label for="contractTemplate">ูููุฐุฌ ุงูุนูุฏ</label>
                    <select id="contractTemplate" required>
                        <option value="">ุงุฎุชุฑ ูููุฐุฌ ุงูุนูุฏ</option>
                        <!-- Will be populated dynamically -->
                    </select>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="UI.closeModal()">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M17 8L8 17L3 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                        ุญูุธ ูุฅุฑุณุงู ุงูุนูุฏ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Excel Import Modal -->
    <div class="modal" id="importModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>ุงุณุชูุฑุงุฏ ุงูุทูุงุจ (ููู Excel)</h3>
                <button class="close-btn" onclick="UI.closeImportModal()">&times;</button>
            </div>
            <div class="modal-body" style="padding: 20px;">
                <div style="text-align: center; margin-bottom: 25px;">
                    <p style="color: #64748b; margin-bottom: 15px;">ุงูุฎุทูุฉ ุงูุฃููู: ูู ุจุชุญููู ุงููููุฐุฌ ูุชุนุจุฆุชู ุจุงูุจูุงูุงุช
                    </p>
                    <button class="btn btn-secondary" onclick="UI.downloadExcelTemplate()"
                        style="width: 100%; justify-content: center; background: #f8fafc; border: 1px solid #e2e8f0; color: #1e293b;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" style="margin-left:8px;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        1. ุชุญููู ูููุฐุฌ ููู ุงูุฅูุณู
                    </button>
                    <p style="font-size: 12px; color: #94a3b8; margin-top: 5px;">ูุญุชูู ุงููููุฐุฌ ุนูู ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ
                        (ุงูุงุณูุ ุงูุฌูุงูุ ุฅูุฎ.)</p>
                </div>

                <hr style="border: 0; border-top: 1px solid #f1f5f9; margin: 20px 0;">

                <div style="text-align: center;">
                    <p style="color: #64748b; margin-bottom: 15px;">ุงูุฎุทูุฉ ุงูุซุงููุฉ: ุฑูุน ุงูููู ุจุนุฏ ุชุนุจุฆุชู</p>
                    <div class="upload-area" onclick="document.getElementById('excelUpload').click()"
                        style="cursor: pointer; border: 2px dashed #6366f1; background: #f5f3ff; padding: 30px; border-radius: 12px; transition: all 0.3s;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#6366f1" stroke-width="2"
                            style="margin-bottom: 10px;">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <p style="color: #4338ca; font-weight: 600;">2. ุงุฎุชุฑ ููู ุงูุฅูุณู ูู ุฌูุงุฒู</p>
                        <p style="font-size: 12px; color: #6366f1;">ูุฏุนู ูููุงุช .xlsx, .xls</p>
                        <input type="file" id="excelUpload" accept=".xlsx, .xls, .csv" hidden
                            onchange="UI.importFromExcel(this)">
                    </div>
                </div>
            </div>
            <div class="modal-footer"
                style="padding: 15px; background: #f8fafc; text-align: left; border-radius: 0 0 16px 16px;">
                <button class="btn btn-secondary" onclick="UI.closeImportModal()">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- Success Notification -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path
                    d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <span id="notificationText"></span>
        </div>
    </div>


    <!--Contract Editor Modal -->
    <div class="modal" id="contractEditorModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 id="contractModalTitle">ุฅูุดุงุก ุนูุฏ ุฌุฏูุฏ</h3>
                <button class="close-btn" id="closeContractModalBtn">&times;</button>
            </div>
            <form id="contractForm" class="form">
                <div class="form-group">
                    <label for="contractTitle">ุนููุงู ุงูุนูุฏ</label>
                    <input type="text" id="contractTitle" required placeholder="ูุซุงู: ุนูุฏ ุชุณุฌูู ุงูุทูุงุจ 2024-2025">
                </div>
                <div class="form-group">
                    <label>ุทุฑููุฉ ุฅุฏุฎุงู ูุต ุงูุนูุฏ</label>
                    <div class="input-method-tabs">
                        <button type="button" class="input-tab active" data-method="write"
                            onclick="ContractUI.switchInputMethod('write')">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M14 2L18 6L7 17H3V13L14 2Z" stroke="currentColor" stroke-width="2" />
                            </svg>
                            ูุชุงุจุฉ ุงููุต
                        </button>
                        <button type="button" class="input-tab" data-method="upload"
                            onclick="ContractUI.switchInputMethod('upload')">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M10 3V13M10 3L6 7M10 3L14 7" stroke="currentColor" stroke-width="2" />
                            </svg>
                            ุงุณุชุฎุฑุงุฌ ูุต
                        </button>
                        <button type="button" class="input-tab" id="pdfTemplateTabBtn" data-method="pdf_template"
                            onclick="ContractUI.switchInputMethod('pdf_template')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                <polyline points="10 9 9 9 8 9"></polyline>
                            </svg>
                            ูุงูุจ PDF
                        </button>
                    </div>
                </div>
                <div class="input-method" id="writeMethod">
                    <div class="form-group">
                        <label for="contractText">ูุต ุงูุนูุฏ</label>
                        <div class="variables-helper">
                            <div class="variables-header">
                                <strong>ุงููุชุบูุฑุงุช ุงูุฏููุงููููุฉ:</strong>
                                <small>ุงุถุบุท ุนูู ุฃู ูุชุบูุฑ ูุฅุถุงูุชู ูููุต</small>
                            </div>
                            <div class="variables-tags">
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงุณู_ุงูุทุงูุจ}')">{ุงุณู_ุงูุทุงูุจ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงุณู_ููู_ุงูุงูุฑ}')">{ุงุณู_ููู_ุงูุงูุฑ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงูุตู}')">{ุงูุตู}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}')">{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}')">{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงูุณูุฉ_ุงูุฏุฑุงุณูุฉ}')">{ุงูุณูุฉ_ุงูุฏุฑุงุณูุฉ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงูุจุฑูุฏ_ุงูุงููุชุฑููู}')">{ุงูุจุฑูุฏ_ุงูุงููุชุฑููู}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุฑูู_ุงููุงุชุณุงุจ}')">{ุฑูู_ุงููุงุชุณุงุจ}</button>
                                <button type="button" class="var-tag"
                                    onclick="ContractUI.insertVariable('{ุงูุชุงุฑูุฎ}')">{ุงูุชุงุฑูุฎ}</button>
                            </div>
                        </div>
                        <textarea id="contractText" rows="15" placeholder="ุงูุชุจ ูุต ุงูุนูุฏ ููุง...

ูุซุงู: ุงุณู ุงูุทุงูุจ: {ุงุณู_ุงูุทุงูุจ}
ุงูุตู: {ุงูุตู}"></textarea>
                    </div>
                </div>
                <div class="input-method" id="uploadMethod" style="display: none;">
                    <div class="upload-area" id="contractUploadArea">
                        <svg width="60" height="60" viewBox="0 0 60 60">
                            <path d="M30 10V40M30 40L40 30M30 40L20 30" stroke="#667eea" stroke-width="3" />
                        </svg>
                        <h3>ุงุณุญุจ ููู PDF ุฃู Word ููุง</h3>
                        <!-- DIRECT BINDING -->
                        <input type="file" id="contractFileInput" accept=".pdf,.doc,.docx,.txt" hidden
                            onchange="ContractUI.handleFileUpload(this)">
                        <button type="button" class="btn btn-secondary" id="browseContractFile"
                            onclick="document.getElementById('contractFileInput').click()">ุชุตูุญ</button>
                    </div>
                    <div id="uploadedContractPreview" style="display: none; margin-top: 1rem;">
                        <p id="uploadedContractName"></p>
                        <textarea id="extractedText" rows="12"></textarea>
                        <button type="button" class="btn-icon" id="removeContractFile" style="margin-top: 0.5rem;"
                            onclick="ContractUI.resetUpload()">ุญุฐู
                            ุงูููู</button>
                        <button type="button" class="btn btn-primary" id="useUploadedTextBtn"
                            style="margin-top: 0.5rem; margin-right: 10px;" onclick="ContractUI.useUploadedText()">
                            ุชุญุฑูุฑ ูุฅุถุงูุฉ ูุชุบูุฑุงุช
                        </button>
                    </div>
                </div>

                <!-- NEW PDF TEMPLATE METHOD -->
                <div class="input-method" id="pdfTemplateMethod" style="display: none;">

                    <!-- 1. Upload Section -->
                    <div class="upload-area" id="pdfTemplateUploadArea" style="margin-bottom: 20px;">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        <h3>ุฑูุน ูุงูุจ PDF ูุงุฑุบ</h3>
                        <p style="color:#718096; font-size: 0.9rem;">ุณูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูููู ูุฎูููุฉ ููุนูุฏ</p>
                        <!-- DIRECT BINDING -->
                        <input type="file" id="pdfTemplateInput" accept=".pdf" hidden
                            onchange="ContractUI.handlePdfTemplateUpload(this)">
                        <button type="button" class="btn btn-secondary"
                            onclick="document.getElementById('pdfTemplateInput').click()">ุงุฎุชุฑ ููู PDF</button>
                    </div>

                    <!-- 2. Editor Container (Hidden until upload) -->
                    <div id="pdfTemplateEditor" style="display: none;">

                        <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                            <div style="flex: 1;">
                                <h4>ูุนุงููุฉ ุงููุงูุจ</h4>
                                <p style="font-size: 12px; color: #666;">ุงุถุบุท ุนูู ุงูููุงู ุงูุฐู ุชุฑูุฏ ุฅุถุงูุฉ ุงููุชุบูุฑ ููู</p>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button type="button" class="btn btn-secondary btn-sm" id="prevPageBtn"
                                    title="ุงูุตูุญุฉ ุงูุณุงุจูุฉ">&lt;</button>
                                <span id="pageInfo">ุตูุญุฉ 1 / 1</span>
                                <button type="button" class="btn btn-secondary btn-sm" id="nextPageBtn"
                                    title="ุงูุตูุญุฉ ุงูุชุงููุฉ">&gt;</button>
                            </div>
                        </div>

                        <div style="display: flex; gap: 20px; align-items: flex-start;">

                            <!-- Sidebar Tools -->
                            <div
                                style="width: 250px; flex-shrink: 0; background: #f8fafc; padding: 15px; border-radius: 8px; border: 1px solid #e2e8f0;">
                                <h5 style="margin-top: 0; margin-bottom: 10px;">ุงููุชุบูุฑุงุช ุงููุชุงุญุฉ</h5>
                                <div id="pdfVariablesList" style="display: flex; flex-direction: column; gap: 8px;">
                                    <!-- Standard Variables -->
                                    <button type="button" class="var-btn" data-var="{ุงุณู_ุงูุทุงูุจ}"
                                        onclick="ContractUI.handleVariableClick('{ุงุณู_ุงูุทุงูุจ}')">ุงุณู ุงูุทุงูุจ</button>
                                    <button type="button" class="var-btn" data-var="{ุงุณู_ููู_ุงูุงูุฑ}"
                                        onclick="ContractUI.handleVariableClick('{ุงุณู_ููู_ุงูุงูุฑ}')">ุงุณู ููู
                                        ุงูุฃูุฑ</button>
                                    <button type="button" class="var-btn" data-var="{ุงูุตู}"
                                        onclick="ContractUI.handleVariableClick('{ุงูุตู}')">ุงูุตู</button>
                                    <button type="button" class="var-btn" data-var="{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}"
                                        onclick="ContractUI.handleVariableClick('{ุงููุฑุญูุฉ_ุงูุฏุฑุงุณูุฉ}')">ุงููุฑุญูุฉ
                                        ุงูุฏุฑุงุณูุฉ</button>
                                    <button type="button" class="var-btn" data-var="{ุงูุณูุฉ_ุงูุฏุฑุงุณูุฉ}"
                                        onclick="ContractUI.handleVariableClick('{ุงูุณูุฉ_ุงูุฏุฑุงุณูุฉ}')">ุงูุณูุฉ
                                        ุงูุฏุฑุงุณูุฉ</button>
                                    <button type="button" class="var-btn" data-var="{ุงูุชุงุฑูุฎ}"
                                        onclick="ContractUI.handleVariableClick('{ุงูุชุงุฑูุฎ}')">ุงูุชุงุฑูุฎ</button>
                                    <button type="button" class="var-btn" data-var="{ุงูุชูููุน}"
                                        onclick="ContractUI.handleVariableClick('{ุงูุชูููุน}')">ููุงู ุงูุชูููุน
                                        (ุตูุฑุฉ)</button>
                                    <button type="button" class="var-btn" data-var="{ุงูุฎุชู}"
                                        onclick="ContractUI.handleVariableClick('{ุงูุฎุชู}')">ููุงู ุงูุฎุชู (ุตูุฑุฉ)</button>

                                    <!-- Dynamic fields will be appended here -->
                                </div>

                                <h5 style="margin-top: 20px; margin-bottom: 10px;">ุงูุญููู ุงููุถุงูุฉ</h5>
                                <ul id="addedFieldsList"
                                    style="list-style: none; padding: 0; margin: 0; font-size: 12px; max-height: 200px; overflow-y: auto;">
                                    <!-- Populated items -->
                                </ul>
                            </div>

                            <!-- PDF Canvas -->
                            <div
                                style="flex: 1; position: relative; border: 1px solid #ccc; background: #525659; overflow: auto; max-height: 600px; text-align: center;">
                                <div id="pdfCanvasContainer" style="position: relative; display: inline-block;">
                                    <canvas id="the-canvas" style="border: 1px solid black; direction: ltr;"></canvas>
                                    <div id="pdfFieldsOverlay"
                                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; direction: ltr;">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="setAsDefault">
                        <span>ุชุนููู ูุนูุฏ ุงูุชุฑุงุถู</span>
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelContractBtn">ุฅูุบุงุก</button>
                    <button type="submit" class="btn btn-primary">ุญูุธ ุงูุนูุฏ</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="contracts.js"></script>
    <!-- Preview Modal -->
    <div id="contractPreviewModal" class="modal">
        <div class="modal-content" style="max-width: 850px;">
            <div class="modal-header">
                <h3>ูุนุงููุฉ ุงูุนูุฏ</h3>
                <button class="close-btn" onclick="UI.closePreviewModal()">&times;</button>
            </div>
            <div id="contractPreviewBody" style="padding: 2rem; background: #fff; direction: rtl;">
                <!-- Content injected by JS -->
            </div>
            <div class="form-actions" style="padding: 1.5rem; justify-content: center;">
                <button class="btn btn-secondary" onclick="UI.closePreviewModal()">ุฅุบูุงู ุงููุนุงููุฉ</button>
            </div>
        </div>
    </div>

</body>

</html>